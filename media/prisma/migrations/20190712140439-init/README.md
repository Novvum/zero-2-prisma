# Migration `20190712140439-init`

This migration has been generated by rajinwonderland at 7/12/2019, 2:04:39 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "file:dev"."Album"("id" TEXT NOT NULL  ,"title" TEXT NOT NULL DEFAULT '' ,"year" INTEGER NOT NULL DEFAULT 0 ,"artist" TEXT   REFERENCES Artist(id),PRIMARY KEY ("id"));

CREATE TABLE "file:dev"."Track"("id" TEXT NOT NULL  ,"name" TEXT NOT NULL DEFAULT '' ,"albumId" INTEGER   ,"mediaType" TEXT NOT NULL DEFAULT 'mp3' ,"milliseconds" INTEGER NOT NULL DEFAULT 0 ,"unitPrice" REAL   ,"album" TEXT   REFERENCES Album(id),"genre" TEXT NOT NULL  REFERENCES Genre(id),PRIMARY KEY ("id"));

CREATE TABLE "file:dev"."Genre"("id" TEXT NOT NULL  ,"name" TEXT NOT NULL DEFAULT '' ,PRIMARY KEY ("id"));

CREATE TABLE "file:dev"."Artist"("id" TEXT NOT NULL  ,"name" TEXT NOT NULL DEFAULT '' ,PRIMARY KEY ("id"));

CREATE TABLE "file:dev"."Customer"("id" TEXT NOT NULL  ,"FirstName" TEXT NOT NULL DEFAULT '' ,"LastName" TEXT NOT NULL DEFAULT '' ,"Company" TEXT NOT NULL DEFAULT '' ,"Address" TEXT NOT NULL DEFAULT '' ,"City" TEXT NOT NULL DEFAULT '' ,"State" TEXT NOT NULL DEFAULT '' ,"Country" TEXT NOT NULL DEFAULT '' ,"PostalCode" TEXT NOT NULL DEFAULT '' ,"Phone" TEXT NOT NULL DEFAULT '' ,"Fax" TEXT NOT NULL DEFAULT '' ,"Email" TEXT NOT NULL DEFAULT '' ,"supportRep" TEXT   REFERENCES Employee(id),PRIMARY KEY ("id"));

CREATE TABLE "file:dev"."Employee"("id" TEXT NOT NULL  ,"FirstName" TEXT NOT NULL DEFAULT '' ,"LastName" TEXT NOT NULL DEFAULT '' ,"Title" TEXT NOT NULL DEFAULT '' ,"BirthDate" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,"HireDate" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,"Address" TEXT NOT NULL DEFAULT '' ,"City" TEXT NOT NULL DEFAULT '' ,"State" TEXT NOT NULL DEFAULT '' ,"Country" TEXT NOT NULL DEFAULT '' ,"PostalCode" TEXT NOT NULL DEFAULT '' ,"Phone" TEXT NOT NULL DEFAULT '' ,"Fax" TEXT NOT NULL DEFAULT '' ,"Email" TEXT NOT NULL DEFAULT '' ,PRIMARY KEY ("id"));

CREATE TABLE "file:dev"."Invoice"("id" TEXT NOT NULL  ,"InvoiceDate" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,"BillingAddress" TEXT NOT NULL DEFAULT '' ,"BillingCity" TEXT NOT NULL DEFAULT '' ,"BillingState" TEXT NOT NULL DEFAULT '' ,"BillingCountry" TEXT NOT NULL DEFAULT '' ,"BillingPostalCode" TEXT NOT NULL DEFAULT '' ,"Total" REAL NOT NULL DEFAULT 0 ,"Customer" TEXT NOT NULL  REFERENCES Customer(id),PRIMARY KEY ("id"));

CREATE TABLE "file:dev"."InvoiceLine"("id" TEXT NOT NULL  ,"UnitPrice" REAL NOT NULL DEFAULT 0 ,"Quantity" INTEGER NOT NULL DEFAULT 0 ,"Track" TEXT   REFERENCES Track(id),"Invoice" TEXT   REFERENCES Invoice(id),PRIMARY KEY ("id"));

CREATE TABLE "file:dev"."Playlist"("id" TEXT NOT NULL  ,"Name" TEXT NOT NULL DEFAULT '' ,PRIMARY KEY ("id"));

CREATE TABLE "file:dev"."Track_composers"("nodeId" TEXT NOT NULL  REFERENCES Track(id),"position" INTEGER NOT NULL  ,"value" TEXT NOT NULL  ,PRIMARY KEY ("nodeId","position"));

CREATE TABLE "file:dev"."_PlaylistToTrack"("A" TEXT NOT NULL  REFERENCES Playlist(id),"B" TEXT NOT NULL  REFERENCES Track(id));

CREATE UNIQUE INDEX "file:dev"."Album.id._UNIQUE" ON "Album"("id")

CREATE UNIQUE INDEX "file:dev"."Track.id._UNIQUE" ON "Track"("id")

CREATE UNIQUE INDEX "file:dev"."Genre.id._UNIQUE" ON "Genre"("id")

CREATE UNIQUE INDEX "file:dev"."Artist.id._UNIQUE" ON "Artist"("id")

CREATE UNIQUE INDEX "file:dev"."Customer.id._UNIQUE" ON "Customer"("id")

CREATE UNIQUE INDEX "file:dev"."Employee.id._UNIQUE" ON "Employee"("id")

CREATE UNIQUE INDEX "file:dev"."Invoice.id._UNIQUE" ON "Invoice"("id")

CREATE UNIQUE INDEX "file:dev"."InvoiceLine.id._UNIQUE" ON "InvoiceLine"("id")

CREATE UNIQUE INDEX "file:dev"."Playlist.id._UNIQUE" ON "Playlist"("id")
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration ..20190712140439-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,117 @@
+datasource db {
+  provider = "sqlite"
+  url      = "file:dev.db"
+  default  = true
+}
+
+generator photon {
+  provider = "photonjs"
+  output   = "node_modules/@generated/photon"
+}
+
+generator nexus_prisma {
+  provider = "nexus-prisma"
+  output   = "node_modules/@generated/nexus-prisma"
+}
+
+model Album {
+  id     String  @default(cuid()) @id @unique
+  title  String
+  artist Artist?
+  year   Int
+  tracks Track[]
+}
+
+model Track {
+  id           String     @default(cuid()) @id @unique
+  name         String
+  album        Album?
+  albumId      Int?
+  mediaType    MediaType
+  genre        Genre
+  composers    String[]
+  milliseconds Int
+  unitPrice    Float?
+  playlists    Playlist[]
+}
+
+enum MediaType {
+  mp3
+  wav
+  aax
+  aiff
+  msv
+  webm
+}
+
+model Genre {
+  id     String  @default(cuid()) @id @unique
+  name   String
+  tracks Track[]
+}
+
+model Artist {
+  id     String  @default(cuid()) @id @unique
+  name   String
+  albums Album[]
+}
+
+model Customer {
+  id         String    @default(cuid()) @id @unique
+  FirstName  String
+  LastName   String
+  Company    String
+  Address    String
+  City       String
+  State      String
+  Country    String
+  PostalCode String
+  Phone      String
+  Fax        String
+  Email      String
+  supportRep Employee?
+}
+
+model Employee {
+  id         String   @default(cuid()) @id @unique
+  FirstName  String
+  LastName   String
+  Title      String
+  BirthDate  DateTime
+  HireDate   DateTime
+  Address    String
+  City       String
+  State      String
+  Country    String
+  PostalCode String
+  Phone      String
+  Fax        String
+  Email      String
+}
+
+model Invoice {
+  id                String        @default(cuid()) @id @unique
+  Customer          Customer
+  InvoiceDate       DateTime
+  BillingAddress    String
+  BillingCity       String
+  BillingState      String
+  BillingCountry    String
+  BillingPostalCode String
+  Total             Float
+  Lines             InvoiceLine[]
+}
+
+model InvoiceLine {
+  id        String   @default(cuid()) @id @unique
+  Invoice   Invoice?
+  Track     Track?
+  UnitPrice Float
+  Quantity  Int
+}
+
+model Playlist {
+  id     String  @default(cuid()) @id @unique
+  Name   String
+  Tracks Track[]
+}
```

## Photon Usage

You can use a specific Photon built for this migration (20190712140439-init)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190712140439-init'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
